- add filters where they used
- optimize multiple flag usage
- use local time
